<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Soccer Team Manager Example</title>
    <link rel="stylesheet" href="../style.css">
    <script src="../App.js"></script>

    <script type="text/javascript">   
        var initialized_data_object;

        var app = create_default_app();
        app.get_data_object().register_validator( function( path, value ) 
        {
            if( path.length >= 3 && path[0] == "teams" && path[2] == "name" )
            {
                if( (typeof(value) == "string" && value.length > 0) )
                    app.get_data_object().remove(["errors", "invalid_name"]);
                else
                {
                    app.get_data_object().set_value( ["errors", "invalid_name"], true ); 
                    app.get_data_object().remove( path.slice(0, -1) );
                }             
            }
        });
        app.start();

    </script>

</head>

    <body class="col col_gap large_padding">
        
        <h1>Soccer Team Manager</h1>

        <form class="col col_gap" data-create-in="teams" data-name="name">
            <p class="b">Create a new team:</p>
            <input type="text" name="name" />
            <div>
                <span>Number of Championships:&nbsp;</span>
                <input type="number" name="championships" />
            </div>
            <p data-display-if="errors.invalid_name">Name must not be empty</p>
            <input type="submit" class="button" value="Add Team" />
        </form>

        <div data-children="teams" data-template-id="team-template" class="resp_row resp_row_gap two_items_on_tablet three_items_on_desktop four_items_on_full_hd">

        </div>

        <div id="team-template">            
            <div class="card">
                <p data-html="teams.name"></p>
                <p>Number of Championships: <span data-html="teams.championships"></span></p>
            </div>
        </div>
        
    </body>

</html>